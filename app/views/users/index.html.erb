<h1 class="page-header"><%= fa_icon 'users' %> Users</h1>
<% flash.each do |name, msg| %>
    <div class="alert alert-dismissable alert-info">
      <button type="button" class="close" data-dismiss="alert">Ã—</button>
      <%= msg %>
    </div>
<% end %>
<%= form_tag users_path, method: :get do %>
    <div class="form-group">
      <div class="input-group">
        <%= text_field_tag :search, params[:search], placeholder: "Filter", class: "form-control" %>
        <span class="input-group-btn">
                    <%= button_tag( :class => "btn btn-default") do %>
                        <i class="fa fa-search"></i>
                    <% end %>
                </span>
      </div>
    </div>
<% end %>

<div class="table-responsive">
  <table class="table table-bordered table-striped">
    <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>Friend</th>
    </tr>
    </thead>
    <tbody>
    <% @users.each do |user| %>
        <tr>
          <td><%= link_to user.username, user_path(user) %></td>
          <td><%= user.email %></td>
          <td>
            <% if(! current_user.friends.exists?(user.id)) %>
                <%= button_to "Add friend", friendships_path(:friend_id => user), :method => "post", class: "btn btn-success" %>
            <% end %>
          </td>
        </tr>
    <% end %>
    </tbody>
  </table>
</div>